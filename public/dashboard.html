<script>
  async function loadClients() {
    const res = await fetch("/api/clients");
    const data = await res.json();

    clientsTable.innerHTML = `
      <tr><th>Client</th><th>Platform</th></tr>
    `;
    reviewClient.innerHTML = "";

    data.forEach(c => {
      clientsTable.innerHTML += `
        <tr><td>${c.name}</td><td>${c.platform}</td></tr>
      `;
      reviewClient.innerHTML += `<option>${c.name}</option>`;
    });
  }

  async function loadReviews() {
    const res = await fetch("/api/reviews");
    const data = await res.json();

    reviewsTable.innerHTML = `
      <tr><th>Client</th><th>Status</th><th>Note</th><th>Removal</th></tr>
    `;

    data.forEach(r => {
      reviewsTable.innerHTML += `
        <tr>
          <td>${r.client}</td>
          <td>${r.status}</td>
          <td>${r.note}</td>
          <td>${r.removal}</td>
        </tr>
      `;
    });
  }

  async function addClient() {
    await fetch("/api/clients", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        name: clientName.value,
        platform: platform.value
      })
    });
    clientName.value = "";
    loadClients();
  }

  async function addReview() {
    await fetch("/api/reviews", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        client: reviewClient.value,
        status: reviewStatus.value,
        note: note.value,
        removal: removalStatus.value
      })
    });
    note.value = "";
    loadReviews();
  }

  loadClients();
  loadReviews();
</script>
