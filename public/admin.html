<h2>Admin Panel</h2>
<table border="1" cellpadding="10" id="users"></table>

<script>
fetch("/api/admin/users", {
  headers: { key: "SUPER_ADMIN_KEY_123" }
})
.then(r => r.json())
.then(data => {
  const t = document.getElementById("users");
  t.innerHTML = "<tr><th>ID</th><th>Name</th><th>Email</th><th>Paid</th><th>Action</th></tr>";
  data.forEach(u => {
    t.innerHTML += `
      <tr>
        <td>${u.id}</td>
        <td>${u.name}</td>
        <td>${u.email}</td>
        <td>${u.paid}</td>
        <td>
          <button onclick="setPaid(${u.id},1)">PAID</button>
          <button onclick="setPaid(${u.id},0)">FREE</button>
        </td>
      </tr>`;
  });
});

function setPaid(id, paid) {
  fetch("/api/admin/set-paid", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      key: "SUPER_ADMIN_KEY_123"
    },
    body: JSON.stringify({ userId:id, paid })
  }).then(() => location.reload());
}
</script>
